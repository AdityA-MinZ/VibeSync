<!DOCTYPE html>
<html>
<head>
  <title>VibeSync Socket Test</title>
  <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
</head>
<body>
  <h1>Socket.IO Test</h1>
  <button onclick="joinPlaylist()">Join Test Playlist</button>
  <button onclick="sendUpdate()">Send Playlist Update</button>
  <div id="logs"></div>

  <script>
    const socket = io('http://localhost:4000');
    const logs = document.getElementById('logs');

    socket.on('connect', () => {
      addLog('âœ… Connected: ' + socket.id);
    });

    socket.on('user-joined', (userId) => {
      addLog('ðŸ‘¥ User joined: ' + userId);
    });

    socket.on('playlist-changed', (data) => {
      addLog('ðŸŽµ Playlist update: ' + JSON.stringify(data));
    });

    function addLog(msg) {
      logs.innerHTML += '<p>' + new Date().toLocaleTimeString() + ': ' + msg + '</p>';
    }

    function joinPlaylist() {
      socket.emit('join-playlist', 'test-room-123');
    }

    function sendUpdate() {
      socket.emit('playlist-update', { playlistId: 'test-room-123', track: 'Babymetal' });
    }
  </script>
</body>
</html>
